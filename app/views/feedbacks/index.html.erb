 <!-- Feedback view page -->
<div class="formInput tableView">
  <h1>Feedbacks</h1>
  <label>Filter presentations</label> 
  <input type="text" class="form-control" for="presentation">

  <button onclick="filter()" class="btn btn-primary mb-2">Filter</button>

  <br>
  <script type="text/javascript">
  //this function looks for the corresponding input text on the page and hides any items whose data-information do not contain that text
  function filter() {
      //get corresponding input text
      let text = document.querySelector("input").value;
      document.querySelectorAll(".filterable").forEach(function(item) {
        //remove the hidden class if it is there
        item.classList.remove('hidden');
        //if the item whose data-information do not contain that text, adding the 'hidden' class 
        if (item.getAttribute("data-information").search(text) < 0) {
            item.classList.add('hidden');
        }
    });
  }
	</script>
  <% Team.all.each do |team| %>
  <!-- Users can see the feedbacks of all their presentations in tables-->
    <% if team.users.find_index(current_user) %>
      <% team.presentations.each do |presentation, i| %>
      	
        <div class="filterable feedbackTable" data-information=<%=presentation.name%>>
        <h2>Presentation: <%=presentation.name%></h3>
           
        <table class="table table-striped table-dark table-bordered">
          <thead>
            <tr>
              <th>Presentation Organization</th>
              <% i = 1 %>
              <% presentation.feedbacks.each do |feedback| %>
                <th>Feedback <%= i %></th>
                <% i = i + 1 %>
              <% end %>
              <th>Average</th>

            </tr>
          </thead>
          <tbody>            
                <tr>
                	<th>The introdution gave me a clear idea of the topic.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                    <td><%= feedback.po1 %></td>
                    <% if feedback.po1 != nil %>
                      <% sum = sum+feedback.po1%>
                      <% j = j+1%>
                  	<% end %>
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%>
                </tr>
                <tr>
                	<th>The introdution gave me a clear idea of the direction of the presentation would take.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.po2 %></td>
                    <% if feedback.po2 != nil %>
                      <% sum = sum+feedback.po2%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%>                  
                </tr>  
                <tr>
                	<th>The presentation presented information in a logical, interesting sequence.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.po3 %></td>
                    <% if feedback.po3 != nil %>
                      <% sum = sum+feedback.po3%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>The conclusion did a good job of summarizing the content of the presentation.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.po4 %></td>
                    <% if feedback.po4 != nil %>
                      <% sum = sum+feedback.po4%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>
                <tr>
                	<th>Enough essential information was given to allow me to effectively evaluate the topic</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.po5 %></td>
                    <% if feedback.po5 != nil %>
                      <% sum = sum+feedback.po5%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>The presentation was free from irrelevant or filler information.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.po6 %></td>
                    <% if feedback.po6 != nil %>
                      <% sum = sum+feedback.po6%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>
                <tr>
                	<th>The presentation filled the time allotted.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.po7 %></td>
                    <% if feedback.po7 != nil %>
                      <% sum = sum+feedback.po7%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                
             </tbody>
          </table>        
          <table class="table table-striped table-dark table-bordered">
          <thead>
            <tr>
              <th>Presentation Content</th>
              <% i = 1 %>
              <% presentation.feedbacks.each do |feedback| %>
              <th>Feedback <%= i %></th>
              <% i = i + 1 %>
              <% end %>
              <th>Average</th>
            </tr>
          </thead>
          <tbody>
                <tr>
                	<th>I could easily follow the main points of the presentation.</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pc1 %></td>
                    <% if feedback.pc1 != nil %>
                      <% sum = sum+feedback.pc1%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>
                <tr>
                	<th>The presenter had a clear understanding of the material presented</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pc2 %></td>
                    <% if feedback.pc2 != nil %>
                      <% sum = sum+feedback.pc2%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr> 
                <tr>
                	<th>The plans, recommendations and/or conclusions are consistent with the findings</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pc3 %></td>
                    <% if feedback.pc3 != nil %>
                      <% sum = sum+feedback.pc3%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>Presenter answers all questions with explanations and elaboration</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pc4 %></td>
                    <% if feedback.pc4 != nil %>
                      <% sum = sum+feedback.pc4%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                    </tbody>
          </table>        
          <table class="table table-striped table-dark table-bordered">
          <thead>
            <tr>
              <th>Presentation Visuals</th>
              <% i = 1 %>
              <% presentation.feedbacks.each do |feedback| %>
              <th>Feedback <%= i %></th>
                <% i = i + 1 %>
              <% end %>
              <th>Average</th>
            </tr>
          </thead>
          <tbody>
                <tr>
                	<th>The visuals were effective in enhancing the message</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pv1 %></td>
                    <% if feedback.pv1 != nil %>
                      <% sum = sum+feedback.pv1%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>The visuals were legible and easy to read</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pv2 %></td>
                    <% if feedback.pv2 != nil %>
                      <% sum = sum+feedback.pv2%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>Visuals were free from grammar and formatting errors</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pv3 %></td>
                    <% if feedback.pv3 != nil %>
                      <% sum = sum+feedback.pv3%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>The number of visual aids enhanced the presentation</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pv4 %></td>
                    <% if feedback.pv4 != nil %>
                      <% sum = sum+feedback.pv4%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                </tr>  
                <tr>
                	<th>The visuals were displayed for an appropriate time and had no annoying transition effect</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pv5 %></td>
                    <% if feedback.pv5 != nil %>
                      <% sum = sum+feedback.pv5%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
               </tr>  
          </tbody> 
        </thead>
          
          
          <table class="table table-striped table-dark table-bordered">
          <thead>
            <tr>
              <th>Presentation Delivery</th>
              <% i = 1 %>
              <% presentation.feedbacks.each do |feedback| %>
              <th>Feedback <%= i %></th>
                <% i = i + 1 %>
              <% end %>
              <th>Average</th>

            </tr>
          </thead>
            <tbody> 
               <tr>
                	<th>The presenter spoke clearly, was easily heard, and maintained an appropriate talking rate</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pd1 %></td>
                    <% if feedback.pd1 != nil %>
                      <% sum = sum+feedback.pd1%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                  
               </tr>   
               <tr>
                	<th>The presenter maintained a good posture and made effective use of hand and body gesture </th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pd2 %></td>
                    <% if feedback.pd2 != nil %>
                      <% sum = sum+feedback.pd2%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
               </tr>   
               <tr>
                	<th>The presenter maintained eye contact with the audience</th>
                  <% sum = 0.0%>
                  <% j = 0%>
                	<% presentation.feedbacks.each do |feedback| %>
                  	<td><%= feedback.pd3 %></td>
                    <% if feedback.pd3 != nil %>
                      <% sum = sum+feedback.pd3%>
                      <% j = j+1%>
                  	<% end %>                    
                  <% end %>
                  <% if j !=0%>
                    <td><%= sum/ j%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
               </tr>
          </tbody>
        
          
          <table class="table table-striped table-dark table-bordered">
          <thead>
            <tr>
              <% i = 1 %>
              <th></th>
              <% presentation.feedbacks.each do |feedback| %>
              <th>Feedback <%= i %></th>
              <% i = i + 1 %>
              <% end %>
              <th>Average</th>
            </tr>
          </thead>
          <tbody>
          	  <tr>
          	  <th>Overall Rating</th>
              <% sum = 0.0%>
          	  <% presentation.feedbacks.each do |feedback| %>
                  <% sum = sum+feedback.overall_rating%>
                  <td><%= feedback.overall_rating %></td>
                  <% end %>
                  <% if presentation.feedbacks.length !=0%>
                    <td><%= sum/ presentation.feedbacks.length%></td>
                  <%else%>
                    <td></td>
                  <%end%> 
                 </tr>
                 <tr>
                 <th>Comments</th>
                 <% presentation.feedbacks.each do |feedback| %>
                  <td><%= feedback.comments %></td>
                  <% end %>
                  <td></td>
                </tr>
                  
          </tbody>
        </table>
    </div>          
      <% end %>
    <% end %>
  <% end %>
  <br>
</div>
